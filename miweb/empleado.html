<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Empleado - Cuenta</title>
  <style>
    /* ---------- ESTILOS GENERALES DE LA PÁGINA ---------- */
    body {
      margin: 0;
      display: flex;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #d7ccc8;
      color: #333;
    }

    /* ---------- ESTILOS DE LA BARRA LATERAL ---------- */
    .sidebar {
      width: 250px;
      background-color: #4e342e;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px;
      height: 100vh;
      box-sizing: border-box;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
    }

    .sidebar button {
      width: 80%;
      padding: 20px;
      margin: 10px 0;
      font-size: 18px;
      background-color: #6d4c41;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s ease, transform 0.2s ease;
      letter-spacing: 0.5px;
    }

    .sidebar button:hover {
      background-color: #8d6e63;
      transform: translateY(-2px);
    }

    /* ---------- ESTILOS DEL CONTENIDO PRINCIPAL ---------- */
    .main-content {
      flex: 1;
      padding: 40px;
      background: #ffffff;
      overflow-y: auto;
      box-sizing: border-box;
      min-height: 100vh;
      border-radius: 8px;
      margin: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .profile {
      text-align: center;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .profile img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #fbc02d;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    .profile h2 {
      margin-top: 20px;
      color: #3e2723;
      font-size: 2em;
      letter-spacing: 1px;
    }

    .profile p {
      color: #5d4037;
      font-size: 1.1em;
    }

    /* ---------- ESTILOS DE FORMULARIOS Y CAMPOS ---------- */
    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
      color: #3e2723;
      font-size: 1.1em;
    }

    input[type="number"],
    select,
    textarea {
      width: calc(100% - 20px);
      padding: 12px;
      margin-top: 8px;
      box-sizing: border-box;
      font-size: 16px;
      border: 1px solid #bcaaa4;
      border-radius: 6px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    input[type="number"]:focus,
    select:focus,
    textarea:focus {
      border-color: #fbc02d;
      box-shadow: 0 0 0 3px rgba(251, 192, 45, 0.2);
      outline: none;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* ---------- BOTONES GENERALES ---------- */
    button[type="submit"],
    #enviarSolicitud {
      margin-top: 30px;
      padding: 14px 25px;
      font-size: 17px;
      background-color: #e65100;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    button[type="submit"]:hover,
    #enviarSolicitud:hover {
      background-color: #ff8f00;
      transform: translateY(-2px);
    }

    /* ---------- ELEMENTOS DE LA LISTA DE PETICIONES ---------- */
    .peticion-item {
      border: 1px solid #bcaaa4;
      background: #fffde7;
      margin: 15px 0;
      padding: 20px;
      border-radius: 8px;
      position: relative;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .peticion-item p {
      margin: 8px 0;
      color: #5d4037;
      line-height: 1.5;
    }

    .peticion-item strong {
      color: #3e2723;
    }

    .peticion-item button {
      margin-right: 15px;
      background-color: #795548;
      color: white;
      padding: 10px 18px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .peticion-item button:hover {
      background-color: #8d6e63;
      transform: translateY(-1px);
    }

    /* ---------- BOTÓN CERRAR SESIÓN ---------- */
    #cerrarSesionBtn {
      margin-top: 40px;
      padding: 14px 25px;
      font-size: 17px;
      background-color: #c62828;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #cerrarSesionBtn:hover {
      background-color: #ef5350;
      transform: translateY(-2px);
    }

    /* ---------- TÍTULOS ---------- */
    h2 {
      color: #3e2723;
      margin-bottom: 25px;
      text-align: center;
      font-size: 2.2em;
    }

    h3 {
      color: #3e2723;
      margin-top: 40px;
      margin-bottom: 20px;
      font-size: 1.8em;
      border-bottom: 2px solid #bcaaa4;
      padding-bottom: 10px;
    }
  </style>
</head>

<body>
  <!-- Barra lateral con navegación -->
  <div class="sidebar">
    <button onclick="mostrarSeccion('cuenta')">Cuenta</button>
    <button onclick="window.location.href='inventario.php'">Inventario</button>
    <button onclick="mostrarSeccion('peticion')">Petición de productos</button>
  </div>

  <!-- Área principal de contenido -->
  <div class="main-content" id="contenido">
    <div class="profile">
      <img src="imagenes/perfil_predeterminado_empleado.webp" alt="Foto del empleado" />
      <h2>Oscar Ruffino</h2>
      <p>Usuario: empleado1</p>
    </div>
  </div>

  <!-- Script para manejar la navegación y lógica del formulario -->
  <script>
    let peticiones = [];

    function mostrarSeccion(seccion) {
      const contenido = document.getElementById('contenido');

      // Muestra la sección de cuenta del empleado
      if (seccion === 'cuenta') {
        contenido.innerHTML = `
        <div class="profile">
          <img src="imagenes/perfil_predeterminado_empleado.webp" alt="Foto del empleado" />
          <h2>Oscar Ruffino</h2>
          <p>Usuario: empleado1</p>
          <button id="cerrarSesionBtn">Cerrar sesión</button>
        </div>
      `;
        document.getElementById('cerrarSesionBtn').addEventListener('click', () => {
          window.location.href = 'index.html';
        });

      // Muestra el formulario para agregar peticiones de productos
      } else if (seccion === 'peticion') {
        contenido.innerHTML = `
        <h2>Petición de Productos</h2>
        <form id="formPeticion">
          <label for="producto">Producto:</label>
          <select id="producto" required>
            <option value="">-- Seleccione un producto --</option>
            <option value="Donas">Donas</option>
            <option value="Café">Café</option>
            <option value="Tazas">Tazas</option>
            <option value="Vasos">Vasos</option>
          </select>

          <label for="cantidad">Cantidad solicitada:</label>
          <input type="number" id="cantidad" min="1" required />

          <label for="motivo">Motivo de la petición:</label>
          <textarea id="motivo" rows="3" required></textarea>

          <button type="submit">Agregar petición</button>
        </form>

        <h3>Lista de peticiones</h3>
        <div id="listaPeticiones"></div>

        <button id="enviarSolicitud">Enviar solicitud al encargado</button>
      `;

        // Variables internas
        const form = document.getElementById('formPeticion');
        const listaPeticionesDiv = document.getElementById('listaPeticiones');
        const enviarBtn = document.getElementById('enviarSolicitud');
        let indiceEditando = -1;

        // Muestra la lista actual de peticiones
        function mostrarPeticiones() {
          listaPeticionesDiv.innerHTML = '';
          if (peticiones.length === 0) {
            listaPeticionesDiv.innerHTML = '<p>No hay peticiones agregadas.</p>';
            return;
          }
          peticiones.forEach((pet, index) => {
            const div = document.createElement('div');
            div.className = 'peticion-item';
            div.innerHTML = `
            <p><strong>Producto:</strong> ${pet.producto}</p>
            <p><strong>Cantidad:</strong> ${pet.cantidad}</p>
            <p><strong>Motivo:</strong> ${pet.motivo}</p>
            <button type="button" onclick="editarPeticion(${index})">Editar</button>
            <button type="button" onclick="eliminarPeticion(${index})">Eliminar</button>
          `;
            listaPeticionesDiv.appendChild(div);
          });
        }

        // Evento para agregar o modificar una petición
        form.addEventListener('submit', e => {
          e.preventDefault();
          const producto = document.getElementById('producto').value.trim();
          const cantidad = document.getElementById('cantidad').value.trim();
          const motivo = document.getElementById('motivo').value.trim();

          if (!producto || !cantidad || !motivo) {
            alert('Por favor, completa todos los campos.');
            return;
          }

          if (indiceEditando === -1) {
            peticiones.push({ producto, cantidad, motivo });
          } else {
            peticiones[indiceEditando] = { producto, cantidad, motivo };
            indiceEditando = -1;
            form.querySelector('button[type="submit"]').textContent = 'Agregar petición';
          }

          form.reset();
          mostrarPeticiones();
        });

        // Función para editar una petición
        window.editarPeticion = function (index) {
          const pet = peticiones[index];
          document.getElementById('producto').value = pet.producto;
          document.getElementById('cantidad').value = pet.cantidad;
          document.getElementById('motivo').value = pet.motivo;
          indiceEditando = index;
          form.querySelector('button[type="submit"]').textContent = 'Guardar cambios';
        };

        // Función para eliminar una petición
        window.eliminarPeticion = function (index) {
          if (confirm('¿Seguro que quieres eliminar esta petición?')) {
            peticiones.splice(index, 1);
            if (indiceEditando === index) {
              form.reset();
              indiceEditando = -1;
              form.querySelector('button[type="submit"]').textContent = 'Agregar petición';
            }
            mostrarPeticiones();
          }
        };

        // Evento para enviar la solicitud (se guarda en localStorage)
        enviarBtn.addEventListener('click', () => {
          if (peticiones.length === 0) {
            alert('No hay peticiones para enviar.');
            return;
          }

          const peticionesGuardadas = JSON.parse(localStorage.getItem('peticionesEmpleado') || '[]');
          peticionesGuardadas.push(...peticiones);
          localStorage.setItem('peticionesEmpleado', JSON.stringify(peticionesGuardadas));

          alert('Solicitud enviada al encargado.');

          peticiones = [];
          form.reset();
          mostrarPeticiones();
        });

        mostrarPeticiones(); // Muestra lista al cargar
      }
    }

    // Carga por defecto la sección de cuenta
    mostrarSeccion('cuenta');
  </script>
</body>
</html>